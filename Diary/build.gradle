/**
 * @file    build.gradle
 * @author  Th√©o Bessel
 * @brief   `Diary` Gradle configuration
 */

java {
    sourceSets.main.java.srcDirs = [ 'src/' ]
}

jar {
    manifest {
        attributes 'Main-Class': 'DiaryMain'
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}

tasks.register('dummy', DefaultTask) {
    println 'Diary dummy task !'
}

tasks.register('run', JavaExec) {
    dependsOn classes
    mainClass = 'DiaryMain'
    classpath = sourceSets.main.runtimeClasspath
    standardInput = System.in

    jvmArgs += '-Djava.security.manager'
    jvmArgs += '-Djava.security.policy=./Diary.policy'
}